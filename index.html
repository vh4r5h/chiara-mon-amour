<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Chiara | My Universe</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Inter:wght@200;400;600&display=swap" rel="stylesheet">
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background: #050505; font-family: 'Inter', sans-serif; cursor: crosshair; }
        
        #counter-container {
            position: absolute; top: 5%; width: 100%; text-align: center; z-index: 20;
            color: white; letter-spacing: 2px;
        }
        .timer-val { font-weight: 600; color: #ff4d4d; font-size: 1.2rem; }
        .timer-label { font-size: 0.7rem; opacity: 0.5; text-transform: uppercase; margin-right: 10px; }

        #overlay {
            position: absolute; top: 45%; left: 50%; transform: translate(-50%, -50%);
            text-align: center; color: white; pointer-events: none; z-index: 10;
        }
        
        .ui-layer { position: absolute; bottom: 8%; width: 100%; text-align: center; z-index: 20; }
        
        button {
            background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255,255,255,0.2);
            color: white; padding: 12px 35px; border-radius: 50px; cursor: pointer;
            font-size: 10px; letter-spacing: 4px; transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(8px); text-transform: uppercase;
        }
        button:hover { background: white; color: black; box-shadow: 0 0 40px rgba(255,255,255,0.3); transform: scale(1.05); }
        
        .cursive { font-family: 'Dancing Script', cursive; font-size: 4.5rem; color: #ff4d4d; margin-bottom: 5px; text-shadow: 0 0 20px rgba(255,77,77,0.3); }

        #final-letter {
            position: fixed; inset: 0; background: radial-gradient(circle at center, #1a0505 0%, #050505 100%);
            display: none; flex-direction: column; align-items: center; justify-content: center;
            padding: 30px; text-align: center; z-index: 100; opacity: 0; transition: opacity 2s ease-in-out;
        }

        .letter-text {
            max-width: 550px; line-height: 1.7; font-weight: 200; font-size: 1.1rem;
            color: #e0e0e0; letter-spacing: 0.3px; position: relative; z-index: 101;
        }
    </style>
</head>
<body>

    <div id="counter-container">
        <p style="font-size: 0.6rem; opacity: 0.4; margin-bottom: 8px; letter-spacing: 5px;">TIME SINCE 18.09.2025</p>
        <div>
            <span class="timer-val" id="d">0</span><span class="timer-label">d</span>
            <span class="timer-val" id="h">0</span><span class="timer-label">h</span>
            <span class="timer-val" id="m">0</span><span class="timer-label">m</span>
            <span class="timer-val" id="s">0</span><span class="timer-label">s</span>
        </div>
    </div>

    <div id="overlay">
        <h1 class="cursive">Chiara</h1>
        <p style="opacity: 0.3; font-size: 9px; letter-spacing: 7px; text-transform: uppercase;">tu m'allume bcp sinon mon soleil</p>
    </div>

    <div class="ui-layer">
        <button onclick="revealLetter()">Appuie ici, Chiara</button>
    </div>

    <div id="final-letter">
        <h2 class="cursive" style="font-size: 3rem; margin-bottom: 25px;">Mon Univers</h2>
        <p class="letter-text">
            Chiara,<br><br>
            Je voulais build un truc qui repose pas sur les past memories pcq ce que je ressens pr toi, sa existe dans le pr√©sent H24.<br><br>
            Comme c √©toiles, tche la star de ma vie et tu rayonnes tujr dans mes pens√©es m√™me si parfois ya d jours je sens le monde est heavy, tu restes always le point fixe le plus important dans ma vie.<br><br>
            Avec ta lumi√®re et toi, tu rends ma vie worth living. Cet univers digital est tr√®s petit mais mon amour pour toi c ‚ôæÔ∏è. Merci pour √™tre la plus belle partie de moi.<br><br>
            <span style="color: #ff4d4d; font-family: 'Dancing Script'; font-size: 2.2rem;">Ton petit Harsh üíó</span>
        </p>
        <button style="margin-top: 40px; opacity: 0.4; font-size: 8px; border: none; z-index: 110;" onclick="closeLetter()">[ Close ]</button>
    </div>

    <script>
        let particles = [];
        let hearts = [];
        let isLetterOpen = false;
        const words = ["CHIARA", "18.09", "H24", "CHIARAxHARSH", "MA BOUFFE", "I LOVE YOU CHIARA", "CHIARA POTENTIAL MODEL", "TCHE MARI SEXY", "HARSH", "TON FACECARD HARMONIEUX"];

        const startDate = new Date("2025-09-18T00:00:00");
        function updateTimer() {
            const now = new Date();
            const diff = now - startDate;
            if (diff > 0) {
                document.getElementById('d').innerText = Math.floor(diff / (1000 * 60 * 60 * 24));
                document.getElementById('h').innerText = Math.floor((diff / (1000 * 60 * 60)) % 24);
                document.getElementById('m').innerText = Math.floor((diff / 1000 / 60) % 60);
                document.getElementById('s').innerText = Math.floor((diff / 1000) % 60);
            }
        }
        setInterval(updateTimer, 1000);
        updateTimer();

        function setup() {
            let canvas = createCanvas(windowWidth, windowHeight);
            canvas.parent(document.body);
            for (let i = 0; i < 180; i++) {
                particles.push(new Particle());
            }
        }

        function draw() {
            background(5, 5, 8, 60);
            
            // Background Stars
            particles.forEach(p => {
                p.update();
                p.show();
                p.attract(mouseX, mouseY);
            });

            // Love Explosion Logic
            if (isLetterOpen) {
                if (hearts.length < 100) {
                    hearts.push(new Heart(width/2, height/2));
                }
                for (let i = hearts.length - 1; i >= 0; i--) {
                    hearts[i].update();
                    hearts[i].show();
                    if (hearts[i].isDead()) hearts.splice(i, 1);
                }
            }
        }

        class Particle {
            constructor() {
                this.pos = createVector(random(width), random(height));
                this.vel = createVector(random(-0.6, 0.6), random(-0.6, 0.6));
                this.acc = createVector(0, 0);
                this.isWord = random() > 0.94;
                this.word = random(words);
                this.alpha = random(100, 255);
                this.size = random(1, 3);
            }
            attract(tx, ty) {
                let f = createVector(tx, ty).sub(this.pos);
                let d = f.mag();
                if (d < 200) {
                    f.setMag(map(d, 0, 200, 0.5, 0));
                    this.acc.add(f);
                }
            }
            update() {
                this.vel.add(this.acc).limit(2.5);
                this.pos.add(this.vel);
                this.acc.mult(0);
                if (this.pos.x > width) this.pos.x = 0; else if (this.pos.x < 0) this.pos.x = width;
                if (this.pos.y > height) this.pos.y = 0; else if (this.pos.y < 0) this.pos.y = height;
            }
            show() {
                if (this.isWord) {
                    fill(255, 77, 77, this.alpha);
                    textSize(10); textAlign(CENTER);
                    text(this.word, this.pos.x, this.pos.y);
                } else {
                    fill(255, this.alpha); noStroke();
                    ellipse(this.pos.x, this.pos.y, this.size);
                }
            }
        }

        class Heart {
            constructor(x, y) {
                this.pos = createVector(x, y);
                this.vel = p5.Vector.random2D().mult(random(2, 6));
                this.acc = createVector(0, 0.05); // Gravity
                this.alpha = 255;
                this.size = random(10, 25);
            }
            update() {
                this.vel.add(this.acc);
                this.pos.add(this.vel);
                this.alpha -= 2;
            }
            show() {
                fill(255, 77, 77, this.alpha);
                noStroke();
                textSize(this.size);
                text("‚ù§Ô∏è", this.pos.x, this.pos.y);
            }
            isDead() { return this.alpha <= 0; }
        }

        function revealLetter() {
            isLetterOpen = true;
            const letter = document.getElementById('final-letter');
            letter.style.display = 'flex';
            setTimeout(() => { letter.style.opacity = '1'; }, 50);
        }

        function closeLetter() {
            const letter = document.getElementById('final-letter');
            letter.style.opacity = '0';
            setTimeout(() => { 
                letter.style.display = 'none'; 
                isLetterOpen = false;
                hearts = [];
            }, 2000);
        }

        function windowResized() { resizeCanvas(windowWidth, windowHeight); }
    </script>
</body>
</html>
